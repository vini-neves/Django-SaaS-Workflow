{# projects/templates/projects/client_detail_modal.html #}
{# Este template é carregado via AJAX DENTRO do modal de detalhes #}

<h2>Detalhes do Cliente: {{ client.name }}</h2>

<div class="detail-section">
    <h3>Informações de Cadastro</h3>
    <div class="detail-item">
        <strong>Nome:</strong> <span>{{ client.name }}</span>
    </div>
    <div class="detail-item">
        <strong>CNPJ:</strong> <span>{{ client.cnpj|default:"Não informado" }}</span>
    </div>
    <div class="detail-item">
        <strong>Início Contrato:</strong> <span>{{ client.data_inicio_contrato|date:"d/m/Y"|default:"Não informado" }}</span>
    </div>
    <div class="detail-item">
        <strong>Fim Contrato:</strong> <span>{{ client.data_finalizacao_contrato|date:"d/m/Y"|default:"Não informado" }}</span>
    </div>
    <div class="detail-item">
        <strong>Contrato Anexado:</strong> 
        {% if client.anexo_contrato %}
            <a href="{{ client.anexo_contrato.url }}" target="_blank">Baixar Contrato</a>
        {% else %}
            <span>Nenhum anexo</span>
        {% endif %}
    </div>
    <div class="detail-item">
        <strong>Manual da Marca Anexado:</strong> 
        {% if client.manual_marca %}
            <a href="{{ client.manual_marca.url }}" target="_blank">Baixar Manual</a>
        {% else %}
            <span>Nenhum anexo</span>
        {% endif %}
    </div>
</div>

<div class="detail-section">
    <h3>Representante</h3>
    <div class="detail-item">
        <strong>Nome:</strong> <span>{{ client.nome_representante|default:"Não informado" }}</span>
    </div>
    <div class="detail-item">
        <strong>Celular:</strong> <span>{{ client.celular_representante|default:"Não informado" }}</span>
    </div>
    <div class="detail-item">
        <strong>Email:</strong> <span>{{ client.email_representante|default:"Não informado" }}</span>
    </div>
</div>

<div class="detail-section">
    <h3>Projetos Em Andamento ({{ projects_andamento|length }})</h3>
    <button class="form-button add-project-from-detail" 
            data-client-id="{{ client.id }}" 
            style="margin-bottom: 15px; width: auto; font-size: 0.9em;">
        <i data-feather="plus" style="width: 16px; height: 16px;"></i>
        Adicionar Novo Projeto
    </button>
    <ul class="project-list">
        {% for project in projects_andamento %}
            <li class="project-list-item">
                <strong>{{ project.name }}</strong>
                <span>Início: {{ project.created_at|date:"d/m/Y" }}</span>
            </li>
        {% empty %}
            <li class="empty-message">Nenhum projeto em andamento.</li>
        {% endfor %}
    </ul>
</div>

<div class="detail-section">
    <h3>Projetos Finalizados ({{ projects_finalizados|length }})</h3>
    <ul class="project-list">
        {% for project in projects_finalizados %}
            <li class="project-list-item">
                <strong>{{ project.name }}</strong>
                <span>Finalizado em: {{ project.created_at|date:"d/m/Y" }}</span>
            </li>
        {% empty %}
            <li class="empty-message">Nenhum projeto finalizado.</li>
        {% endfor %}
    </ul>
</div>